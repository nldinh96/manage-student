{
	"info": {
		"_postman_id": "student-management-graphql",
		"name": "Student Management - GraphQL API",
		"description": "GraphQL API collection for Student Management System",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Login - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.login) {",
									"    pm.collectionVariables.set('accessToken', jsonData.data.login.accessToken);",
									"    pm.collectionVariables.set('refreshToken', jsonData.data.login.refreshToken);",
									"    pm.collectionVariables.set('userId', jsonData.data.login.userId);",
									"    console.log('‚úÖ Tokens saved successfully');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation Login($input: LoginInput!) {\n  login(input: $input) {\n    accessToken\n    refreshToken\n    tokenType\n    expiresIn\n    userId\n    username\n    role\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"username\": \"admin\",\n    \"password\": \"admin123\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Login - Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.login) {",
									"    pm.collectionVariables.set('accessToken', jsonData.data.login.accessToken);",
									"    pm.collectionVariables.set('refreshToken', jsonData.data.login.refreshToken);",
									"    pm.collectionVariables.set('userId', jsonData.data.login.userId);",
									"    console.log('‚úÖ Tokens saved successfully');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation Login($input: LoginInput!) {\n  login(input: $input) {\n    accessToken\n    refreshToken\n    tokenType\n    expiresIn\n    userId\n    username\n    role\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"username\": \"student\",\n    \"password\": \"student123\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.refreshToken) {",
									"    pm.collectionVariables.set('accessToken', jsonData.data.refreshToken.accessToken);",
									"    console.log('‚úÖ Access token refreshed');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation RefreshToken($refreshToken: String!) {\n  refreshToken(refreshToken: $refreshToken) {\n    accessToken\n    refreshToken\n    tokenType\n    expiresIn\n    userId\n    username\n    role\n  }\n}",
								"variables": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		},
		{
			"name": "üë§ User Management",
			"item": [
				{
					"name": "Register New User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation Register($input: RegisterInput!) {\n  register(input: $input) {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n  }\n}",
								"variables": "{\n  \"input\": {\n    \"username\": \"newuser\",\n    \"password\": \"password123\",\n    \"email\": \"newuser@example.com\",\n    \"role\": \"STUDENT\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Current User (Me)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query Me {\n  me {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n    updatedAt\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetUser($id: ID!) {\n  user(id: $id) {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n    updatedAt\n  }\n}",
								"variables": "{\n  \"id\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get User by Username",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetUserByUsername($username: String!) {\n  userByUsername(username: $username) {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n    updatedAt\n  }\n}",
								"variables": "{\n  \"username\": \"admin\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetAllUsers {\n  users {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n    updatedAt\n  }\n}",
								"variables": ""
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Users by Role (ADMIN)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetUsersByRole($role: Role) {\n  users(role: $role) {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n  }\n}",
								"variables": "{\n  \"role\": \"ADMIN\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Get Users by Role (STUDENT)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query GetUsersByRole($role: Role) {\n  users(role: $role) {\n    id\n    username\n    email\n    role\n    enabled\n    createdAt\n  }\n}",
								"variables": "{\n  \"role\": \"STUDENT\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Update User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation UpdateUser($id: ID!, $input: UpdateUserInput!) {\n  updateUser(id: $id, input: $input) {\n    id\n    username\n    email\n    role\n    enabled\n    updatedAt\n  }\n}",
								"variables": "{\n  \"id\": \"{{userId}}\",\n  \"input\": {\n    \"username\": \"updatedUsername\",\n    \"email\": \"updated@example.com\"\n  }\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ChangePassword($id: ID!, $newPassword: String!) {\n  changePassword(id: $id, newPassword: $newPassword)\n}",
								"variables": "{\n  \"id\": \"{{userId}}\",\n  \"newPassword\": \"newPassword123\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Change Role",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ChangeRole($id: ID!, $role: Role!) {\n  changeRole(id: $id, role: $role) {\n    id\n    username\n    role\n    updatedAt\n  }\n}",
								"variables": "{\n  \"id\": \"{{userId}}\",\n  \"role\": \"ADMIN\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Disable User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation DisableUser($id: ID!) {\n  disableUser(id: $id)\n}",
								"variables": "{\n  \"id\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Enable User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation EnableUser($id: ID!) {\n  enableUser(id: $id)\n}",
								"variables": "{\n  \"id\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				},
				{
					"name": "Delete User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation DeleteUser($id: ID!) {\n  deleteUser(id: $id)\n}",
								"variables": "{\n  \"id\": \"{{userId}}\"\n}"
							}
						},
						"url": {
							"raw": "{{baseUrl}}/graphql",
							"host": ["{{baseUrl}}"],
							"path": ["graphql"]
						}
					}
				}
			]
		}
	]
}


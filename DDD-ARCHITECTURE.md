# DDD Architecture Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                    Presentation Layer                        │
│  ┌────────────────────┐         ┌────────────────────┐     │
│  │  REST Controller   │         │  GraphQL Resolver  │     │
│  │  (StudentController)│         │  (StudentGraphQL...)│     │
│  └────────────────────┘         └────────────────────┘     │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│                    Application Layer                         │
│  ┌────────────────────────────────────────────────────┐     │
│  │         StudentApplicationService                   │     │
│  │  - Orchestrate use cases                           │     │
│  │  - Transaction management                          │     │
│  │  - DTO mapping                                     │     │
│  └────────────────────────────────────────────────────┘     │
│         DTOs          │          Mappers                    │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│                      Domain Layer                            │
│  ┌──────────────────────────────────────────────────┐       │
│  │           Student (Aggregate Root)                │       │
│  │  - Business logic & invariants                   │       │
│  │  - activate(), suspend(), graduate()             │       │
│  └──────────────────────────────────────────────────┘       │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │ StudentCode │  │  FullName   │  │   Address   │        │
│  │(Value Object)│  │(Value Object)│  │(Value Object)│        │
│  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                              │
│  ┌──────────────────────────────────────────────────┐       │
│  │      StudentDomainService                        │       │
│  │  - Cross-aggregate business logic                │       │
│  │  - Validation, Generation                        │       │
│  └──────────────────────────────────────────────────┘       │
│                                                              │
│  ┌──────────────────────────────────────────────────┐       │
│  │      StudentRepository (Interface)               │       │
│  └──────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│                   Infrastructure Layer                       │
│  ┌──────────────────────────────────────────────────┐       │
│  │      StudentRepositoryImpl                       │       │
│  │  - JPA implementation                            │       │
│  │  - Data access logic                             │       │
│  └──────────────────────────────────────────────────┘       │
│                                                              │
│  ┌──────────────────────────────────────────────────┐       │
│  │      Exception Handling & Configuration          │       │
│  └──────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
                    ┌──────────────┐
                    │   Database   │
                    │   (MySQL)    │
                    └──────────────┘
```

## Dependency Flow

```
Presentation → Application → Domain ← Infrastructure
```

**Key Principle**: Domain layer không phụ thuộc vào bất kỳ layer nào!

